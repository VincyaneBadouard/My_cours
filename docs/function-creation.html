<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Cours 6 Function creation | My cours</title>
  <meta name="description" content="Description." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Cours 6 Function creation | My cours" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cours 6 Function creation | My cours" />
  
  <meta name="twitter:description" content="Description." />
  

<meta name="author" content="Vincyane Badouard" />


<meta name="date" content="2022-01-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fonctions-bien-sympatiques-trés-cher.html"/>
<link rel="next" href="i-am-a-modeler.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script async defer src="https://hypothes.is/embed.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">My_cours</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Partie exemple</b></span></li>
<li class="chapter" data-level="1" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html"><i class="fa fa-check"></i><b>1</b> Bayesian and Stan langage</a><ul>
<li class="chapter" data-level="1.1" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#règles"><i class="fa fa-check"></i><b>1.1</b> Règles</a></li>
<li class="chapter" data-level="1.2" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#les-données"><i class="fa fa-check"></i><b>1.2</b> Les données</a></li>
<li class="chapter" data-level="1.3" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#definitions"><i class="fa fa-check"></i><b>1.3</b> Definitions</a></li>
<li class="chapter" data-level="1.4" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#loi-poisson-positif-discret-par-exemble-un-abondance"><i class="fa fa-check"></i><b>1.4</b> Loi Poisson (positif &amp; discret) (par exemble un abondance)</a></li>
<li class="chapter" data-level="1.5" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#loi-bernouilli-logistique-blogit-réponse-binaire"><i class="fa fa-check"></i><b>1.5</b> Loi Bernouilli-logistique (Blogit) (réponse binaire)</a></li>
<li class="chapter" data-level="1.6" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#tools"><i class="fa fa-check"></i><b>1.6</b> Tools</a></li>
<li class="chapter" data-level="1.7" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#rapidité"><i class="fa fa-check"></i><b>1.7</b> Rapidité</a></li>
<li class="chapter" data-level="1.8" data-path="bayesian-and-stan-langage.html"><a href="bayesian-and-stan-langage.html#non-identifiabilité"><i class="fa fa-check"></i><b>1.8</b> Non-identifiabilité</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="bayesian-stats-cours.html"><a href="bayesian-stats-cours.html"><i class="fa fa-check"></i><b>2</b> Bayesian stats cours</a><ul>
<li class="chapter" data-level="2.1" data-path="bayesian-stats-cours.html"><a href="bayesian-stats-cours.html#grid-approximation-to-define-posterior"><i class="fa fa-check"></i><b>2.1</b> Grid approximation (to define posterior) :</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="c.html"><a href="c.html"><i class="fa fa-check"></i><b>3</b> C++</a></li>
<li class="chapter" data-level="4" data-path="datatable-functions.html"><a href="datatable-functions.html"><i class="fa fa-check"></i><b>4</b> datatable functions</a><ul>
<li class="chapter" data-level="4.1" data-path="datatable-functions.html"><a href="datatable-functions.html#sources"><i class="fa fa-check"></i><b>4.1</b> Sources</a></li>
<li class="chapter" data-level="4.2" data-path="datatable-functions.html"><a href="datatable-functions.html#pourquoi-data.table"><i class="fa fa-check"></i><b>4.2</b> Pourquoi data.table</a></li>
<li class="chapter" data-level="4.3" data-path="datatable-functions.html"><a href="datatable-functions.html#syntax"><i class="fa fa-check"></i><b>4.3</b> Syntax</a></li>
<li class="chapter" data-level="4.4" data-path="datatable-functions.html"><a href="datatable-functions.html#create-a-data.table"><i class="fa fa-check"></i><b>4.4</b> Create a data.table</a></li>
<li class="chapter" data-level="4.5" data-path="datatable-functions.html"><a href="datatable-functions.html#convert-a-data.frame-or-list-to-a-data.table"><i class="fa fa-check"></i><b>4.5</b> Convert a data.frame or list to a data.table</a></li>
<li class="chapter" data-level="4.6" data-path="datatable-functions.html"><a href="datatable-functions.html#punctuation"><i class="fa fa-check"></i><b>4.6</b> Punctuation</a></li>
<li class="chapter" data-level="4.7" data-path="datatable-functions.html"><a href="datatable-functions.html#subset-rows"><i class="fa fa-check"></i><b>4.7</b> Subset rows :</a></li>
<li class="chapter" data-level="4.8" data-path="datatable-functions.html"><a href="datatable-functions.html#extract-columns"><i class="fa fa-check"></i><b>4.8</b> Extract columns :</a></li>
<li class="chapter" data-level="4.9" data-path="datatable-functions.html"><a href="datatable-functions.html#summarize"><i class="fa fa-check"></i><b>4.9</b> Summarize</a></li>
<li class="chapter" data-level="4.10" data-path="datatable-functions.html"><a href="datatable-functions.html#compute-columns"><i class="fa fa-check"></i><b>4.10</b> Compute columns</a></li>
<li class="chapter" data-level="4.11" data-path="datatable-functions.html"><a href="datatable-functions.html#change-column-class"><i class="fa fa-check"></i><b>4.11</b> Change column class</a></li>
<li class="chapter" data-level="4.12" data-path="datatable-functions.html"><a href="datatable-functions.html#group"><i class="fa fa-check"></i><b>4.12</b> Group</a></li>
<li class="chapter" data-level="4.13" data-path="datatable-functions.html"><a href="datatable-functions.html#common-grouped-operations"><i class="fa fa-check"></i><b>4.13</b> Common grouped operations</a></li>
<li class="chapter" data-level="4.14" data-path="datatable-functions.html"><a href="datatable-functions.html#a-sequence-operation-on-a-datatable"><i class="fa fa-check"></i><b>4.14</b> A sequence operation on a datatable</a></li>
<li class="chapter" data-level="4.15" data-path="datatable-functions.html"><a href="datatable-functions.html#functions"><i class="fa fa-check"></i><b>4.15</b> Functions !</a></li>
<li class="chapter" data-level="4.16" data-path="datatable-functions.html"><a href="datatable-functions.html#combine-data.tables"><i class="fa fa-check"></i><b>4.16</b> Combine data.tables</a></li>
<li class="chapter" data-level="4.17" data-path="datatable-functions.html"><a href="datatable-functions.html#indexation"><i class="fa fa-check"></i><b>4.17</b> Indexation</a></li>
<li class="chapter" data-level="4.18" data-path="datatable-functions.html"><a href="datatable-functions.html#reshape"><i class="fa fa-check"></i><b>4.18</b> Reshape</a></li>
<li class="chapter" data-level="4.19" data-path="datatable-functions.html"><a href="datatable-functions.html#avoir-des-infoscalculer-des-statistiques"><i class="fa fa-check"></i><b>4.19</b> Avoir des infos/calculer des statistiques</a></li>
<li class="chapter" data-level="4.20" data-path="datatable-functions.html"><a href="datatable-functions.html#apply-functions"><i class="fa fa-check"></i><b>4.20</b> Apply functions</a></li>
<li class="chapter" data-level="4.21" data-path="datatable-functions.html"><a href="datatable-functions.html#sequential-rows"><i class="fa fa-check"></i><b>4.21</b> Sequential rows</a></li>
<li class="chapter" data-level="4.22" data-path="datatable-functions.html"><a href="datatable-functions.html#maniement-de-chaines-de-caractères"><i class="fa fa-check"></i><b>4.22</b> Maniement de chaines de caractères</a></li>
<li class="chapter" data-level="4.23" data-path="datatable-functions.html"><a href="datatable-functions.html#read-and-write-files"><i class="fa fa-check"></i><b>4.23</b> Read and write files</a></li>
<li class="chapter" data-level="4.24" data-path="datatable-functions.html"><a href="datatable-functions.html#programmer-des-fonctions-avec-data.table"><i class="fa fa-check"></i><b>4.24</b> Programmer des fonctions avec data.table</a><ul>
<li class="chapter" data-level="4.24.1" data-path="datatable-functions.html"><a href="datatable-functions.html#sécuriser"><i class="fa fa-check"></i><b>4.24.1</b> Sécuriser</a></li>
<li class="chapter" data-level="4.24.2" data-path="datatable-functions.html"><a href="datatable-functions.html#variables-en-argument"><i class="fa fa-check"></i><b>4.24.2</b> Variables en argument</a></li>
<li class="chapter" data-level="4.24.3" data-path="datatable-functions.html"><a href="datatable-functions.html#sd-subset-of-data"><i class="fa fa-check"></i><b>4.24.3</b> .SD (Subset of Data)</a></li>
<li class="chapter" data-level="4.24.4" data-path="datatable-functions.html"><a href="datatable-functions.html#lapply.sd-pour-des-fonctions-de-statistiques-descriptives"><i class="fa fa-check"></i><b>4.24.4</b> lapply+.SD pour des fonctions de statistiques descriptives</a></li>
<li class="chapter" data-level="4.24.5" data-path="datatable-functions.html"><a href="datatable-functions.html#des-data.table-poupées-russes"><i class="fa fa-check"></i><b>4.24.5</b> Des data.table poupées russes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html"><i class="fa fa-check"></i><b>5</b> Fonctions bien sympatiques trés cher</a><ul>
<li class="chapter" data-level="5.1" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#conseils"><i class="fa fa-check"></i><b>5.1</b> Conseils</a></li>
<li class="chapter" data-level="5.2" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#tips-de-codeur"><i class="fa fa-check"></i><b>5.2</b> Tips de codeur</a></li>
<li class="chapter" data-level="5.3" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#charger-les-données"><i class="fa fa-check"></i><b>5.3</b> Charger les données</a></li>
<li class="chapter" data-level="5.4" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#corection-préliminaires-des-données"><i class="fa fa-check"></i><b>5.4</b> Corection préliminaires des données</a></li>
<li class="chapter" data-level="5.5" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#transformation-de-données"><i class="fa fa-check"></i><b>5.5</b> Transformation de données !</a></li>
<li class="chapter" data-level="5.6" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#histoire-de-characters"><i class="fa fa-check"></i><b>5.6</b> Histoire de characters</a></li>
<li class="chapter" data-level="5.7" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#la-syntaxe-qui-fait-chier-du-balai"><i class="fa fa-check"></i><b>5.7</b> La syntaxe qui fait chier, du balai !</a></li>
<li class="chapter" data-level="5.8" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#comparaison-de-tables"><i class="fa fa-check"></i><b>5.8</b> Comparaison de tables</a></li>
<li class="chapter" data-level="5.9" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#tirage"><i class="fa fa-check"></i><b>5.9</b> Tirage</a></li>
<li class="chapter" data-level="5.10" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#yo-arrange-mes-données"><i class="fa fa-check"></i><b>5.10</b> Yo ! arrange mes données !</a></li>
<li class="chapter" data-level="5.11" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#donne-moi-des-infos-sur-mes-données"><i class="fa fa-check"></i><b>5.11</b> Donne moi des infos sur mes données</a></li>
<li class="chapter" data-level="5.12" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#calcul-informatif"><i class="fa fa-check"></i><b>5.12</b> Calcul informatif</a></li>
<li class="chapter" data-level="5.13" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#sf-package"><i class="fa fa-check"></i><b>5.13</b> sf package</a></li>
<li class="chapter" data-level="5.14" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#eh-oh-cest-moi-qui-décide-illustre-moi-ça-comme-il-faut"><i class="fa fa-check"></i><b>5.14</b> Eh oh c’est moi qui décide ! illustre moi ça comme il faut !</a></li>
<li class="chapter" data-level="5.15" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#télécharger-mon-bébé-dans-le-bon-format-au-bon-endroit"><i class="fa fa-check"></i><b>5.15</b> Télécharger mon bébé dans le bon format, au bon endroit !</a></li>
<li class="chapter" data-level="5.16" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#nettoyage"><i class="fa fa-check"></i><b>5.16</b> Nettoyage</a></li>
<li class="chapter" data-level="5.17" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#boucle"><i class="fa fa-check"></i><b>5.17</b> Boucle</a></li>
<li class="chapter" data-level="5.18" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#les-objets"><i class="fa fa-check"></i><b>5.18</b> Les objets</a></li>
<li class="chapter" data-level="5.19" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#condition"><i class="fa fa-check"></i><b>5.19</b> Condition</a></li>
<li class="chapter" data-level="5.20" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#logical-operators"><i class="fa fa-check"></i><b>5.20</b> Logical Operators</a></li>
<li class="chapter" data-level="5.21" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#stan---modelo---bayes"><i class="fa fa-check"></i><b>5.21</b> Stan - Modelo - Bayes</a></li>
<li class="chapter" data-level="5.22" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#faire-de-la-biblio-comme-une-déesse"><i class="fa fa-check"></i><b>5.22</b> Faire de la biblio comme une déesse</a></li>
<li class="chapter" data-level="5.23" data-path="fonctions-bien-sympatiques-trés-cher.html"><a href="fonctions-bien-sympatiques-trés-cher.html#date-time"><i class="fa fa-check"></i><b>5.23</b> Date &amp; time</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="function-creation.html"><a href="function-creation.html"><i class="fa fa-check"></i><b>6</b> Function creation</a><ul>
<li class="chapter" data-level="6.1" data-path="function-creation.html"><a href="function-creation.html#étapes-de-développement"><i class="fa fa-check"></i><b>6.1</b> Étapes de développement :</a></li>
<li class="chapter" data-level="6.2" data-path="function-creation.html"><a href="function-creation.html#structure"><i class="fa fa-check"></i><b>6.2</b> Structure :</a></li>
<li class="chapter" data-level="6.3" data-path="function-creation.html"><a href="function-creation.html#nommer-ses-arguments"><i class="fa fa-check"></i><b>6.3</b> Nommer ses arguments</a></li>
<li class="chapter" data-level="6.4" data-path="function-creation.html"><a href="function-creation.html#valeurs-par-défaut"><i class="fa fa-check"></i><b>6.4</b> Valeurs par défaut</a></li>
<li class="chapter" data-level="6.5" data-path="function-creation.html"><a href="function-creation.html#évaluation-de-la-fonction"><i class="fa fa-check"></i><b>6.5</b> évaluation de la fonction</a></li>
<li class="chapter" data-level="6.6" data-path="function-creation.html"><a href="function-creation.html#vérification-de-la-classe-des-arguments"><i class="fa fa-check"></i><b>6.6</b> Vérification de la classe des arguments</a></li>
<li class="chapter" data-level="6.7" data-path="function-creation.html"><a href="function-creation.html#largument-fun"><i class="fa fa-check"></i><b>6.7</b> L’argument ‘fun’</a></li>
<li class="chapter" data-level="6.8" data-path="function-creation.html"><a href="function-creation.html#largument"><i class="fa fa-check"></i><b>6.8</b> L’argument ‘…’</a></li>
<li class="chapter" data-level="6.9" data-path="function-creation.html"><a href="function-creation.html#types-de-fonction"><i class="fa fa-check"></i><b>6.9</b> Types de fonction</a><ul>
<li class="chapter" data-level="6.9.1" data-path="function-creation.html"><a href="function-creation.html#appel-récursif"><i class="fa fa-check"></i><b>6.9.1</b> Appel récursif</a></li>
<li class="chapter" data-level="6.9.2" data-path="function-creation.html"><a href="function-creation.html#fct-anonyme-dans-une-autre-fonction"><i class="fa fa-check"></i><b>6.9.2</b> Fct anonyme dans une autre fonction</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="function-creation.html"><a href="function-creation.html#retourner-un-résultat"><i class="fa fa-check"></i><b>6.10</b> Retourner un résultat</a></li>
<li class="chapter" data-level="6.11" data-path="function-creation.html"><a href="function-creation.html#fonctions-de-message-et-darrêt-de-fonction"><i class="fa fa-check"></i><b>6.11</b> Fonctions de message et d’arrêt de fonction</a></li>
<li class="chapter" data-level="6.12" data-path="function-creation.html"><a href="function-creation.html#interaction-avec-lutilisateur"><i class="fa fa-check"></i><b>6.12</b> Interaction avec l’utilisateur</a></li>
<li class="chapter" data-level="6.13" data-path="function-creation.html"><a href="function-creation.html#iteration"><i class="fa fa-check"></i><b>6.13</b> Iteration</a></li>
<li class="chapter" data-level="6.14" data-path="function-creation.html"><a href="function-creation.html#parallelisation"><i class="fa fa-check"></i><b>6.14</b> Parallelisation</a></li>
<li class="chapter" data-level="6.15" data-path="function-creation.html"><a href="function-creation.html#choses-à-savoir"><i class="fa fa-check"></i><b>6.15</b> Choses à savoir</a></li>
<li class="chapter" data-level="6.16" data-path="function-creation.html"><a href="function-creation.html#débogage-tips"><i class="fa fa-check"></i><b>6.16</b> Débogage tips</a></li>
<li class="chapter" data-level="6.17" data-path="function-creation.html"><a href="function-creation.html#où-écrire-ses-fcts"><i class="fa fa-check"></i><b>6.17</b> Où écrire ses fcts ?</a></li>
<li class="chapter" data-level="6.18" data-path="function-creation.html"><a href="function-creation.html#comment-les-utiliser"><i class="fa fa-check"></i><b>6.18</b> Comment les utiliser ?</a></li>
<li class="chapter" data-level="6.19" data-path="function-creation.html"><a href="function-creation.html#plusieurs-fonctions-internes---passation-dinfos"><i class="fa fa-check"></i><b>6.19</b> Plusieurs fonctions internes - passation d’infos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html"><i class="fa fa-check"></i><b>7</b> I am a modeler</a><ul>
<li class="chapter" data-level="7.1" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#la-modélisation"><i class="fa fa-check"></i><b>7.1</b> La modélisation</a></li>
<li class="chapter" data-level="7.2" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#modèle-linéaire-simple"><i class="fa fa-check"></i><b>7.2</b> Modèle linéaire simple</a></li>
<li class="chapter" data-level="7.3" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#lois-de-probabilité-de-la-fonction-de-réponse"><i class="fa fa-check"></i><b>7.3</b> Lois de probabilité de la fonction de réponse</a></li>
<li class="chapter" data-level="7.4" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#glm-modèles-linéaires-généralisés"><i class="fa fa-check"></i><b>7.4</b> GLM (modèles linéaires généralisés)</a></li>
<li class="chapter" data-level="7.5" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#modèle-mixte"><i class="fa fa-check"></i><b>7.5</b> Modèle mixte</a></li>
<li class="chapter" data-level="7.6" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#créer-nos-prédicteurs-selon-leffet-que-lon-veut-tester"><i class="fa fa-check"></i><b>7.6</b> Créer nos prédicteurs selon l’effet que l’on veut tester</a></li>
<li class="chapter" data-level="7.7" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#tests"><i class="fa fa-check"></i><b>7.7</b> tests</a></li>
<li class="chapter" data-level="7.8" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#estimations-des-paramètres"><i class="fa fa-check"></i><b>7.8</b> Estimations des paramètres</a></li>
<li class="chapter" data-level="7.9" data-path="i-am-a-modeler.html"><a href="i-am-a-modeler.html#variable-réponse-qualitatite"><i class="fa fa-check"></i><b>7.9</b> Variable réponse qualitatite</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="intégration-continue.html"><a href="intégration-continue.html"><i class="fa fa-check"></i><b>8</b> Intégration continue</a><ul>
<li class="chapter" data-level="8.1" data-path="intégration-continue.html"><a href="intégration-continue.html#travis"><i class="fa fa-check"></i><b>8.1</b> Travis</a><ul>
<li class="chapter" data-level="8.1.1" data-path="intégration-continue.html"><a href="intégration-continue.html#script-de-contrôle-de-travis"><i class="fa fa-check"></i><b>8.1.1</b> Script de contrôle de Travis</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="intégration-continue.html"><a href="intégration-continue.html#codecov"><i class="fa fa-check"></i><b>8.2</b> Codecov</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-à-stan.html"><a href="introduction-à-stan.html"><i class="fa fa-check"></i><b>9</b> Introduction à Stan</a><ul>
<li class="chapter" data-level="9.1" data-path="introduction-à-stan.html"><a href="introduction-à-stan.html#pourquoi-les-stats-bayesiennes"><i class="fa fa-check"></i><b>9.1</b> Pourquoi les stats bayesiennes ?</a></li>
<li class="chapter" data-level="9.2" data-path="introduction-à-stan.html"><a href="introduction-à-stan.html#stan-program"><i class="fa fa-check"></i><b>9.2</b> Stan program :</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="package-creation.html"><a href="package-creation.html"><i class="fa fa-check"></i><b>10</b> Package creation</a><ul>
<li class="chapter" data-level="10.1" data-path="package-creation.html"><a href="package-creation.html#references"><i class="fa fa-check"></i><b>10.1</b> References</a></li>
<li class="chapter" data-level="10.2" data-path="package-creation.html"><a href="package-creation.html#les-packages-r-nécessaires"><i class="fa fa-check"></i><b>10.2</b> Les packages R nécessaires</a></li>
<li class="chapter" data-level="10.3" data-path="package-creation.html"><a href="package-creation.html#creation-du-package"><i class="fa fa-check"></i><b>10.3</b> Creation du package</a></li>
<li class="chapter" data-level="10.4" data-path="package-creation.html"><a href="package-creation.html#tips-de-codeur-1"><i class="fa fa-check"></i><b>10.4</b> Tips de codeur</a></li>
<li class="chapter" data-level="10.5" data-path="package-creation.html"><a href="package-creation.html#eviter-les-messages-derreurs"><i class="fa fa-check"></i><b>10.5</b> Eviter les messages d’erreurs</a></li>
<li class="chapter" data-level="10.6" data-path="package-creation.html"><a href="package-creation.html#commandes"><i class="fa fa-check"></i><b>10.6</b> Commandes</a><ul>
<li class="chapter" data-level="10.6.1" data-path="package-creation.html"><a href="package-creation.html#comprendre-le-skeleton"><i class="fa fa-check"></i><b>10.6.1</b> Comprendre le Skeleton</a></li>
<li class="chapter" data-level="10.6.2" data-path="package-creation.html"><a href="package-creation.html#r-folfer"><i class="fa fa-check"></i><b>10.6.2</b> R folfer</a></li>
<li class="chapter" data-level="10.6.3" data-path="package-creation.html"><a href="package-creation.html#nompackage.r-file"><i class="fa fa-check"></i><b>10.6.3</b> nompackage.R file</a></li>
<li class="chapter" data-level="10.6.4" data-path="package-creation.html"><a href="package-creation.html#namespace-file"><i class="fa fa-check"></i><b>10.6.4</b> NAMESPACE file</a></li>
<li class="chapter" data-level="10.6.5" data-path="package-creation.html"><a href="package-creation.html#description-file"><i class="fa fa-check"></i><b>10.6.5</b> DESCRIPTION file</a></li>
<li class="chapter" data-level="10.6.6" data-path="package-creation.html"><a href="package-creation.html#rbuildignore"><i class="fa fa-check"></i><b>10.6.6</b> .Rbuildignore</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="package-creation.html"><a href="package-creation.html#importation-de-fonctions"><i class="fa fa-check"></i><b>10.7</b> Importation de fonctions</a></li>
<li class="chapter" data-level="10.8" data-path="package-creation.html"><a href="package-creation.html#créer-des-classes-pour-ses-objets-en-plus-de-ceux-de-base"><i class="fa fa-check"></i><b>10.8</b> Créer des classes pour ses objets en plus de ceux de base</a></li>
<li class="chapter" data-level="10.9" data-path="package-creation.html"><a href="package-creation.html#créer-une-méthode-générique"><i class="fa fa-check"></i><b>10.9</b> Créer une “méthode générique”</a></li>
<li class="chapter" data-level="10.10" data-path="package-creation.html"><a href="package-creation.html#tidyverse"><i class="fa fa-check"></i><b>10.10</b> tidyverse</a></li>
<li class="chapter" data-level="10.11" data-path="package-creation.html"><a href="package-creation.html#vignette"><i class="fa fa-check"></i><b>10.11</b> Vignette</a></li>
<li class="chapter" data-level="10.12" data-path="package-creation.html"><a href="package-creation.html#site-du-package-pkgdown"><i class="fa fa-check"></i><b>10.12</b> Site du package : Pkgdown</a></li>
<li class="chapter" data-level="10.13" data-path="package-creation.html"><a href="package-creation.html#des-petits-messages-à-lutilisateur"><i class="fa fa-check"></i><b>10.13</b> Des petits messages à l’utilisateur</a></li>
<li class="chapter" data-level="10.14" data-path="package-creation.html"><a href="package-creation.html#c-1"><i class="fa fa-check"></i><b>10.14</b> C++</a></li>
<li class="chapter" data-level="10.15" data-path="package-creation.html"><a href="package-creation.html#biblio"><i class="fa fa-check"></i><b>10.15</b> Biblio</a></li>
<li class="chapter" data-level="10.16" data-path="package-creation.html"><a href="package-creation.html#where-stock-my-data-in-my-package"><i class="fa fa-check"></i><b>10.16</b> Where stock my data in my package</a><ul>
<li class="chapter" data-level="10.16.1" data-path="package-creation.html"><a href="package-creation.html#testing-data"><i class="fa fa-check"></i><b>10.16.1</b> <em>Testing data</em>:</a></li>
<li class="chapter" data-level="10.16.2" data-path="package-creation.html"><a href="package-creation.html#default-data"><i class="fa fa-check"></i><b>10.16.2</b> <em>Default data</em>:</a></li>
<li class="chapter" data-level="10.16.3" data-path="package-creation.html"><a href="package-creation.html#exported-data-in-data"><i class="fa fa-check"></i><b>10.16.3</b> Exported data (in <em>data/</em>)</a></li>
<li class="chapter" data-level="10.16.4" data-path="package-creation.html"><a href="package-creation.html#documenter-ces-données-exportées"><i class="fa fa-check"></i><b>10.16.4</b> Documenter ces données exportées</a></li>
<li class="chapter" data-level="10.16.5" data-path="package-creation.html"><a href="package-creation.html#internal-data-for-a-function-in-rsysdata.rda"><i class="fa fa-check"></i><b>10.16.5</b> Internal data for a function (in <em>R/sysdata.rda</em>)</a></li>
</ul></li>
<li class="chapter" data-level="10.17" data-path="package-creation.html"><a href="package-creation.html#charger-ces-data"><i class="fa fa-check"></i><b>10.17</b> Charger ces data</a></li>
<li class="chapter" data-level="10.18" data-path="package-creation.html"><a href="package-creation.html#tests-1"><i class="fa fa-check"></i><b>10.18</b> Tests</a></li>
<li class="chapter" data-level="10.19" data-path="package-creation.html"><a href="package-creation.html#un-package-pour-tous"><i class="fa fa-check"></i><b>10.19</b> Un package pour tous</a></li>
<li class="chapter" data-level="10.20" data-path="package-creation.html"><a href="package-creation.html#cran"><i class="fa fa-check"></i><b>10.20</b> CRAN</a><ul>
<li class="chapter" data-level="10.20.1" data-path="package-creation.html"><a href="package-creation.html#les-tests"><i class="fa fa-check"></i><b>10.20.1</b> Les tests</a></li>
</ul></li>
<li class="chapter" data-level="10.21" data-path="package-creation.html"><a href="package-creation.html#debugger"><i class="fa fa-check"></i><b>10.21</b> Debugger</a></li>
<li class="chapter" data-level="10.22" data-path="package-creation.html"><a href="package-creation.html#versioning"><i class="fa fa-check"></i><b>10.22</b> Versioning</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>11</b> Rmarkdown</a><ul>
<li class="chapter" data-level="11.1" data-path="rmarkdown.html"><a href="rmarkdown.html#titre"><i class="fa fa-check"></i><b>11.1</b> Titre</a><ul>
<li class="chapter" data-level="11.1.1" data-path="rmarkdown.html"><a href="rmarkdown.html#sous-titre"><i class="fa fa-check"></i><b>11.1.1</b> Sous-titre</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="rmarkdown.html"><a href="rmarkdown.html#chunk"><i class="fa fa-check"></i><b>11.2</b> Chunk</a></li>
<li class="chapter" data-level="11.3" data-path="rmarkdown.html"><a href="rmarkdown.html#table"><i class="fa fa-check"></i><b>11.3</b> Table</a></li>
<li class="chapter" data-level="11.4" data-path="rmarkdown.html"><a href="rmarkdown.html#figure"><i class="fa fa-check"></i><b>11.4</b> Figure</a></li>
<li class="chapter" data-level="11.5" data-path="rmarkdown.html"><a href="rmarkdown.html#equations"><i class="fa fa-check"></i><b>11.5</b> Equations</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="shiny-cours.html"><a href="shiny-cours.html"><i class="fa fa-check"></i><b>12</b> Shiny cours</a><ul>
<li class="chapter" data-level="12.1" data-path="shiny-cours.html"><a href="shiny-cours.html#packages"><i class="fa fa-check"></i><b>12.1</b> Packages</a></li>
<li class="chapter" data-level="12.2" data-path="shiny-cours.html"><a href="shiny-cours.html#tips-codeur"><i class="fa fa-check"></i><b>12.2</b> Tips codeur</a></li>
<li class="chapter" data-level="12.3" data-path="shiny-cours.html"><a href="shiny-cours.html#shiny"><i class="fa fa-check"></i><b>12.3</b> Shiny:</a></li>
<li class="chapter" data-level="12.4" data-path="shiny-cours.html"><a href="shiny-cours.html#structurer-lappli"><i class="fa fa-check"></i><b>12.4</b> Structurer l’appli</a></li>
<li class="chapter" data-level="12.5" data-path="shiny-cours.html"><a href="shiny-cours.html#créer-linterface"><i class="fa fa-check"></i><b>12.5</b> Créer l’interface</a><ul>
<li class="chapter" data-level="12.5.1" data-path="shiny-cours.html"><a href="shiny-cours.html#mise-en-page"><i class="fa fa-check"></i><b>12.5.1</b> Mise en page</a></li>
<li class="chapter" data-level="12.5.2" data-path="shiny-cours.html"><a href="shiny-cours.html#inputs-ouputs"><i class="fa fa-check"></i><b>12.5.2</b> INPUTS &amp; OUPUTS</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="shiny-cours.html"><a href="shiny-cours.html#gérer-les-intéractions"><i class="fa fa-check"></i><b>12.6</b> Gérer les intéractions</a></li>
<li class="chapter" data-level="12.7" data-path="shiny-cours.html"><a href="shiny-cours.html#enrichir-lappli"><i class="fa fa-check"></i><b>12.7</b> Enrichir l’appli</a><ul>
<li class="chapter" data-level="12.7.1" data-path="shiny-cours.html"><a href="shiny-cours.html#leaflet"><i class="fa fa-check"></i><b>12.7.1</b> Leaflet</a></li>
<li class="chapter" data-level="12.7.2" data-path="shiny-cours.html"><a href="shiny-cours.html#chargerenregistrer-des-fichiers"><i class="fa fa-check"></i><b>12.7.2</b> Charger/enregistrer des fichiers</a></li>
<li class="chapter" data-level="12.7.3" data-path="shiny-cours.html"><a href="shiny-cours.html#shinydashboard"><i class="fa fa-check"></i><b>12.7.3</b> Shinydashboard</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="shiny-cours.html"><a href="shiny-cours.html#autres-packages"><i class="fa fa-check"></i><b>12.8</b> Autres packages</a></li>
<li class="chapter" data-level="12.9" data-path="shiny-cours.html"><a href="shiny-cours.html#mise-en-ligne-et-partage-de-lappli"><i class="fa fa-check"></i><b>12.9</b> Mise en ligne et partage de l’appli</a><ul>
<li class="chapter" data-level="12.9.1" data-path="shiny-cours.html"><a href="shiny-cours.html#en-local-cest-mieux-plus-rapide-car-outils-de-calcul-et-on-y-est-seul"><i class="fa fa-check"></i><b>12.9.1</b> En local : c’est mieux, plus rapide car outils de calcul et on y est seul</a></li>
<li class="chapter" data-level="12.9.2" data-path="shiny-cours.html"><a href="shiny-cours.html#a-distance"><i class="fa fa-check"></i><b>12.9.2</b> A distance</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="shiny-cours.html"><a href="shiny-cours.html#module"><i class="fa fa-check"></i><b>12.10</b> Module</a></li>
<li class="chapter" data-level="12.11" data-path="shiny-cours.html"><a href="shiny-cours.html#autres-sources-cours"><i class="fa fa-check"></i><b>12.11</b> Autres sources cours</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html"><i class="fa fa-check"></i><b>13</b> Spatial data cours</a><ul>
<li class="chapter" data-level="13.1" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#types-de-données-spatiales"><i class="fa fa-check"></i><b>13.1</b> Types de données spatiales</a></li>
<li class="chapter" data-level="13.2" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#ggplot"><i class="fa fa-check"></i><b>13.2</b> ggplot</a></li>
<li class="chapter" data-level="13.3" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#les-rasters"><i class="fa fa-check"></i><b>13.3</b> Les rasters</a></li>
<li class="chapter" data-level="13.4" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#les-objets-spatialisés-en-r"><i class="fa fa-check"></i><b>13.4</b> Les objets spatialisés en R</a><ul>
<li class="chapter" data-level="13.4.1" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#données-vectorielles"><i class="fa fa-check"></i><b>13.4.1</b> Données vectorielles</a></li>
<li class="chapter" data-level="13.4.2" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#données-raster"><i class="fa fa-check"></i><b>13.4.2</b> Données raster</a></li>
<li class="chapter" data-level="13.4.3" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#travailler-sur-du-vectoriel-du-raster"><i class="fa fa-check"></i><b>13.4.3</b> Travailler sur du vectoriel &amp; du raster</a></li>
<li class="chapter" data-level="13.4.4" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#opérations-sur-raster"><i class="fa fa-check"></i><b>13.4.4</b> Opérations sur Raster</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#shapefiles"><i class="fa fa-check"></i><b>13.5</b> Shapefiles</a></li>
<li class="chapter" data-level="13.6" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#systèmes-de-coordonnées-de-références-crs"><i class="fa fa-check"></i><b>13.6</b> Systèmes de coordonnées de références (CRS)</a><ul>
<li class="chapter" data-level="13.6.1" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#système-de-coordonnées-géographiques"><i class="fa fa-check"></i><b>13.6.1</b> Système de coordonnées géographiques</a></li>
<li class="chapter" data-level="13.6.2" data-path="spatial-data-cours.html"><a href="spatial-data-cours.html#système-de-référence-de-coordonnées-pojetées"><i class="fa fa-check"></i><b>13.6.2</b> Système de référence de coordonnées pojetées</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="stats-à-ne-plus-chercher.html"><a href="stats-à-ne-plus-chercher.html"><i class="fa fa-check"></i><b>14</b> Stats à ne plus chercher</a><ul>
<li class="chapter" data-level="14.1" data-path="stats-à-ne-plus-chercher.html"><a href="stats-à-ne-plus-chercher.html#corrélations"><i class="fa fa-check"></i><b>14.1</b> Corrélations</a></li>
<li class="chapter" data-level="14.2" data-path="stats-à-ne-plus-chercher.html"><a href="stats-à-ne-plus-chercher.html#evaluer-la-performance-dune-prédiction"><i class="fa fa-check"></i><b>14.2</b> Evaluer la performance d’une prédiction</a><ul>
<li class="chapter" data-level="14.2.1" data-path="stats-à-ne-plus-chercher.html"><a href="stats-à-ne-plus-chercher.html#validation-croisée-rééchantillonage"><i class="fa fa-check"></i><b>14.2.1</b> Validation croisée (rééchantillonage)</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="stats-à-ne-plus-chercher.html"><a href="stats-à-ne-plus-chercher.html#processus-gaussiens"><i class="fa fa-check"></i><b>14.3</b> Processus gaussiens</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/VincyaneBadouard/My_cours" target="blank">Source</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My cours</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class = rmdreview>
This book is in <b><a href="open.html#open">Open Review</a></b>. I want your feedback to make the book better for you and other readers. To add your annotation, <span style="background-color: #3297FD; color: white">select some text</span> and then click the <i class="h-icon-annotate"></i> on the pop-up menu. To see the annotations of others, click the <i class="h-icon-chevron-left"></i> in the upper right hand corner of the page <i class="fa fa-arrow-circle-right  fa-rotate-315" aria-hidden="true"></i>
</div>
<div id="function-creation" class="section level1">
<h1><span class="header-section-number">Cours 6</span> Function creation</h1>
<div id="étapes-de-développement" class="section level2">
<h2><span class="header-section-number">6.1</span> Étapes de développement :</h2>
<ol style="list-style-type: decimal">
<li>Planifier le travail (pas de programmation encore) :</li>
</ol>
<ul>
<li>définir clairement la tâche à accomplir par la fonction et la sortie qu’elle doit produire,</li>
<li>prévoir les étapes à suivre afin d’effectuer cette tâche,</li>
<li>identifier les arguments devant être fournis en entrée à la fonction.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Développer le corps de la fonction</li>
</ol>
<ul>
<li>Écrire le programme par étapes, d’abord sans former la fonction, en commentant bien le code et en travaillant sur des mini-données test.</li>
<li>Pour chaque petite étape ou sous-tâche, tester interactivement si le programme produit le résultat escompté (tester souvent en cours de travail, ainsi il y a moins de débogage à faire).</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>Créer la fonction à partir du programme développé.</p></li>
<li><p>Documenter la fonction.</p></li>
<li><p>Tester la fonction : sauvegarder nos tests et bien les structurer, car ils serviront souvent.</p></li>
<li><p>Si nous rencontrons des comportements indésirables lors des tests, déboguer la fonction :</p></li>
</ol>
<ul>
<li>cerner le ou les problèmes,</li>
<li>apporter les correctifs nécessaires à la fonction (que ce soit dans son corps ou dans liste de ses arguments),</li>
<li>adapter la documentation et les tests au besoin,</li>
<li>faire tourner de nouveau les tests,</li>
<li>répéter ces sous-étapes jusqu’à ce que les tests ne révèlent plus aucun problème à régler ou aucune amélioration à apporter.</li>
</ul>
</div>
<div id="structure" class="section level2">
<h2><span class="header-section-number">6.2</span> Structure :</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="function-creation.html#cb13-1"></a>nomdemafonction&lt;-<span class="cf">function</span>(variable1,variable2...)</span>
<span id="cb13-2"><a href="function-creation.html#cb13-2"></a>{</span>
<span id="cb13-3"><a href="function-creation.html#cb13-3"></a><span class="co">#ici on met le contenu de la fonction (généralement on effectue des transformations aux variables passées en argument)</span></span>
<span id="cb13-4"><a href="function-creation.html#cb13-4"></a></span>
<span id="cb13-5"><a href="function-creation.html#cb13-5"></a></span>
<span id="cb13-6"><a href="function-creation.html#cb13-6"></a></span>
<span id="cb13-7"><a href="function-creation.html#cb13-7"></a></span>
<span id="cb13-8"><a href="function-creation.html#cb13-8"></a></span>
<span id="cb13-9"><a href="function-creation.html#cb13-9"></a><span class="kw">return</span>(Variabledesortie) <span class="co">## il s&#39;agit du résultat que va renvoyer la fonction (non négligeable!)! c&#39;est bien le but d&#39;une fct!</span></span>
<span id="cb13-10"><a href="function-creation.html#cb13-10"></a>}</span>
<span id="cb13-11"><a href="function-creation.html#cb13-11"></a></span>
<span id="cb13-12"><a href="function-creation.html#cb13-12"></a><span class="co">#une fois la fonction créée on peut l&#39;utiliser:</span></span>
<span id="cb13-13"><a href="function-creation.html#cb13-13"></a> <span class="kw">nomdemafonction</span>(varA,varB,...)</span></code></pre></div>
<p><em>Une fct normalement constituée ne travaille directement que sur ses arguments et non sur les objets stockés dans la console.</em>
Tous les objets qui seront utilisés dans le script doivent avoir été créés dans le script.
Les seules exceptions à cette règle sont les arguments qui eux sont définis dans l’en-tête.</p>
<p>Exemple</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="function-creation.html#cb14-1"></a><span class="co">## Calculer le coefficient de variation (CV) (=écart type/moyenne) d&#39;une série de valeur.</span></span>
<span id="cb14-2"><a href="function-creation.html#cb14-2"></a></span>
<span id="cb14-3"><a href="function-creation.html#cb14-3"></a></span>
<span id="cb14-4"><a href="function-creation.html#cb14-4"></a></span>
<span id="cb14-5"><a href="function-creation.html#cb14-5"></a>cv &lt;-<span class="st"> </span><span class="cf">function</span>(x){      <span class="co">## x est un vecteur contenant une série de valeurs</span></span>
<span id="cb14-6"><a href="function-creation.html#cb14-6"></a>  moy &lt;-<span class="st"> </span><span class="kw">mean</span>(x)        <span class="co">## moyenne de x</span></span>
<span id="cb14-7"><a href="function-creation.html#cb14-7"></a>  s &lt;-<span class="st"> </span><span class="kw">sd</span>(x)            <span class="co">## ecart type de x</span></span>
<span id="cb14-8"><a href="function-creation.html#cb14-8"></a>  rslt &lt;-<span class="st"> </span>s<span class="op">/</span>moy         <span class="co">## calcul du CV</span></span>
<span id="cb14-9"><a href="function-creation.html#cb14-9"></a>  rslt                  <span class="co">#la fonction retourne le résultat</span></span>
<span id="cb14-10"><a href="function-creation.html#cb14-10"></a>}</span></code></pre></div>
</div>
<div id="nommer-ses-arguments" class="section level2">
<h2><span class="header-section-number">6.3</span> Nommer ses arguments</h2>
<p>Noms habituels :
x, y, z: vectors.
w: a vector of weights.
df: a data frame.
i, j: numeric indices (typically rows and columns).
n: length, or number of rows.
p: number of columns.</p>
<p>Règle :
Si les <em>arguments</em> des fonctions appelées sont donnés de la forme <em>name = object</em>, ils peuvent être écris dans n’importe quel ordre. Dans le cas contraire, il faut respecter l’ordre des arguments.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="function-creation.html#cb15-1"></a>fun1 &lt;-<span class="st"> </span><span class="cf">function</span>(data, data.frame, graph, limit) {</span>
<span id="cb15-2"><a href="function-creation.html#cb15-2"></a>  [<span class="cf">function</span> body omitted]</span>
<span id="cb15-3"><a href="function-creation.html#cb15-3"></a>}</span>
<span id="cb15-4"><a href="function-creation.html#cb15-4"></a></span>
<span id="cb15-5"><a href="function-creation.html#cb15-5"></a><span class="co">## Alors la fonction peut être invoquée de plusieurs manières, par exemple:</span></span>
<span id="cb15-6"><a href="function-creation.html#cb15-6"></a></span>
<span id="cb15-7"><a href="function-creation.html#cb15-7"></a>ans &lt;-<span class="st"> </span><span class="kw">fun1</span>(d, df, <span class="ot">TRUE</span>, <span class="dv">20</span>) <span class="co">## arguments dans l&#39;ordre</span></span>
<span id="cb15-8"><a href="function-creation.html#cb15-8"></a>ans &lt;-<span class="st"> </span><span class="kw">fun1</span>(<span class="dt">data=</span>d, <span class="dt">limit=</span><span class="dv">20</span>, <span class="dt">graph=</span><span class="ot">TRUE</span>, <span class="dt">data.frame=</span>df) <span class="co">## arguments dans le désordre et donc nommés</span></span></code></pre></div>
</div>
<div id="valeurs-par-défaut" class="section level2">
<h2><span class="header-section-number">6.4</span> Valeurs par défaut</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="function-creation.html#cb16-1"></a>fun1 &lt;-<span class="st"> </span><span class="cf">function</span>(data, data.frame, <span class="dt">graph=</span><span class="ot">TRUE</span>, <span class="dt">limit=</span><span class="dv">20</span>) { ... } <span class="co">#on attribue une valeur à l&#39;argument dès l&#39;écriture</span></span></code></pre></div>
</div>
<div id="évaluation-de-la-fonction" class="section level2">
<h2><span class="header-section-number">6.5</span> évaluation de la fonction</h2>
<p>return() renvoie la dernière valeur calculée</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="function-creation.html#cb17-1"></a>nom_de_fonction &lt;-<span class="st"> </span><span class="cf">function</span>(arguments) {</span>
<span id="cb17-2"><a href="function-creation.html#cb17-2"></a>    instructions</span>
<span id="cb17-3"><a href="function-creation.html#cb17-3"></a>    <span class="kw">return</span>(valeur) <span class="co">#non négligeable! c&#39;est bien le but d&#39;une fct!</span></span>
<span id="cb17-4"><a href="function-creation.html#cb17-4"></a>}</span></code></pre></div>
</div>
<div id="vérification-de-la-classe-des-arguments" class="section level2">
<h2><span class="header-section-number">6.6</span> Vérification de la classe des arguments</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="function-creation.html#cb18-1"></a><span class="kw">class</span>(x)</span></code></pre></div>
</div>
<div id="largument-fun" class="section level2">
<h2><span class="header-section-number">6.7</span> L’argument ‘fun’</h2>
<p>= passer une fonction a une autre fonction en argument</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="function-creation.html#cb19-1"></a>col_summary &lt;-<span class="st"> </span><span class="cf">function</span>(df, fun) {</span>
<span id="cb19-2"><a href="function-creation.html#cb19-2"></a>  out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">length</span>(df))</span>
<span id="cb19-3"><a href="function-creation.html#cb19-3"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</span>
<span id="cb19-4"><a href="function-creation.html#cb19-4"></a>    out[i] &lt;-<span class="st"> </span><span class="kw">fun</span>(df[[i]])</span>
<span id="cb19-5"><a href="function-creation.html#cb19-5"></a>  }</span>
<span id="cb19-6"><a href="function-creation.html#cb19-6"></a>  out</span>
<span id="cb19-7"><a href="function-creation.html#cb19-7"></a>}</span>
<span id="cb19-8"><a href="function-creation.html#cb19-8"></a><span class="kw">col_summary</span>(df, median)</span>
<span id="cb19-9"><a href="function-creation.html#cb19-9"></a><span class="kw">col_summary</span>(df, mean)</span></code></pre></div>
</div>
<div id="largument" class="section level2">
<h2><span class="header-section-number">6.8</span> L’argument ‘…’</h2>
<p>Il est possible d’utiliser le symbole ‘…’ dans les paramètres d’une fct pour indiquer que tous les paramètres supplémentaires seront transmis aux autres fonctions internes.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="function-creation.html#cb20-1"></a>fun1 &lt;-<span class="st"> </span><span class="cf">function</span>(data, data.frame, <span class="dt">graph=</span><span class="ot">TRUE</span>, <span class="dt">limit=</span><span class="dv">20</span>, ...) {</span>
<span id="cb20-2"><a href="function-creation.html#cb20-2"></a>       [omitted statements]</span>
<span id="cb20-3"><a href="function-creation.html#cb20-3"></a>       <span class="cf">if</span> (graph)</span>
<span id="cb20-4"><a href="function-creation.html#cb20-4"></a>         <span class="kw">par</span>(<span class="dt">pch=</span><span class="st">&quot;*&quot;</span>, ...)</span>
<span id="cb20-5"><a href="function-creation.html#cb20-5"></a>       [more omissions]</span>
<span id="cb20-6"><a href="function-creation.html#cb20-6"></a>     }</span></code></pre></div>
</div>
<div id="types-de-fonction" class="section level2">
<h2><span class="header-section-number">6.9</span> Types de fonction</h2>
<div id="appel-récursif" class="section level3">
<h3><span class="header-section-number">6.9.1</span> Appel récursif</h3>
<p>La récursivité est une démarche qui fait référence à l’objet-même de la démarche à un moment du processus (=poupée russe)
Une fct peut s’appeller elle-même, tant qu’il existe une condition d’arrêt.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="function-creation.html#cb21-1"></a><span class="co">## Scalaire : nombre réel</span></span>
<span id="cb21-2"><a href="function-creation.html#cb21-2"></a><span class="co">## Vecteur : serie de valeurs</span></span>
<span id="cb21-3"><a href="function-creation.html#cb21-3"></a></span>
<span id="cb21-4"><a href="function-creation.html#cb21-4"></a><span class="co">## Sur scalaire</span></span>
<span id="cb21-5"><a href="function-creation.html#cb21-5"></a>factorielle &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb21-6"><a href="function-creation.html#cb21-6"></a>  <span class="cf">if</span> (n<span class="op">==</span><span class="dv">1</span>) resultat &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co">## scalaire booléen       ## arrêt de la récursion (n=1 est la condition d&#39;arrêt)</span></span>
<span id="cb21-7"><a href="function-creation.html#cb21-7"></a>  <span class="cf">else</span> resultat &lt;-<span class="st"> </span><span class="kw">factorielle</span>(n<span class="dv">-1</span>)<span class="op">*</span>n <span class="co">## appel récursif (si n différent de 1)</span></span>
<span id="cb21-8"><a href="function-creation.html#cb21-8"></a>  <span class="kw">return</span>(resultat)</span>
<span id="cb21-9"><a href="function-creation.html#cb21-9"></a>}</span>
<span id="cb21-10"><a href="function-creation.html#cb21-10"></a><span class="co">## Sur vecteur</span></span>
<span id="cb21-11"><a href="function-creation.html#cb21-11"></a>factorielle &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb21-12"><a href="function-creation.html#cb21-12"></a>  indice &lt;-<span class="st"> </span>(n <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="co">## vecteur de booléens</span></span>
<span id="cb21-13"><a href="function-creation.html#cb21-13"></a>  <span class="cf">if</span> (<span class="kw">all</span>(indice)) <span class="kw">return</span>(n) <span class="co">## arrêt de la récursion (n=1 est la condition d&#39;arrêt)</span></span>
<span id="cb21-14"><a href="function-creation.html#cb21-14"></a>  n[<span class="op">!</span>indice] &lt;-<span class="st"> </span>n[<span class="op">!</span>indice]<span class="op">*</span><span class="kw">factorielle</span>(n[<span class="op">!</span>indice] <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="co">## appel récursif (si n différent de 1)</span></span>
<span id="cb21-15"><a href="function-creation.html#cb21-15"></a>  <span class="kw">return</span>(n)</span>
<span id="cb21-16"><a href="function-creation.html#cb21-16"></a>}</span></code></pre></div>
</div>
<div id="fct-anonyme-dans-une-autre-fonction" class="section level3">
<h3><span class="header-section-number">6.9.2</span> Fct anonyme dans une autre fonction</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="function-creation.html#cb22-1"></a><span class="kw">outer</span>(x, y, <span class="cf">function</span>(x, y) x <span class="op">*</span><span class="st"> </span>y<span class="op">^</span><span class="dv">2</span>) <span class="co">## une fonction est mise en argument d&#39;une autre fonction</span></span>
<span id="cb22-2"><a href="function-creation.html#cb22-2"></a><span class="co">##      [,1] [,2] [,3]</span></span>
<span id="cb22-3"><a href="function-creation.html#cb22-3"></a><span class="co">## [1,]   16   25   36</span></span>
<span id="cb22-4"><a href="function-creation.html#cb22-4"></a><span class="co">## [2,]   32   50   72</span></span>
<span id="cb22-5"><a href="function-creation.html#cb22-5"></a><span class="co">## [3,]   48   75  108</span></span></code></pre></div>
</div>
</div>
<div id="retourner-un-résultat" class="section level2">
<h2><span class="header-section-number">6.10</span> Retourner un résultat</h2>
<ul>
<li><p>Une fonction retourne le <em>résultat de la dernière expression</em> du corps de la fct.
-&gt; donc il ne faut pas que la dernère expression soit une affectation (&lt;-), sinon on ne pourra pas affecter le résultat à un objet</p></li>
<li><p>On peut retourner un résultat spécifique, à n’importe quel endroit de la fonction avec la fct <em>return()</em>
Si le résultat que l’on veut retourner est codé par la dernière expression, return() est inutile.
“return” se met plutot à la fin d’une fct, sauf cas exeptionel (if…), car la fct n’affiche plus les msg/stop si le return s’est effectué.</p></li>
<li><p>Lorsqu’une fonction doit retourner plusieurs résultats, il est en général préférable d’avoir recours à une <em>liste nommée</em>.</p></li>
<li><p>Retourner plsrs outputs : <em>Outputs &lt;- list(objt1 = objt1, objt2 = objt2) return(Outputs)</em></p></li>
</ul>
<p><em>Si une fct retourne plsrs ouputs, elle doit toujours les retourner. S’il ne sont générés que sous condition, créer un objet vide du m^me nom lorsque la condition n’est pas respectée.</em></p>
</div>
<div id="fonctions-de-message-et-darrêt-de-fonction" class="section level2">
<h2><span class="header-section-number">6.11</span> Fonctions de message et d’arrêt de fonction</h2>
<ul>
<li>message() = message diagnostique (juste informatif)</li>
<li>warning() = message d’erreur (problème non rédhibitoire (ex: syntax))</li>
<li>stop() = message d’erreur + arrêt du code (rédhibitoire)</li>
</ul>
<p>“stop” est une fonction d’erreur, si c’est juste une question de prérequis, il faut utiliser “if” pas “stop”.
Un “stop” dans une fonction interne arrête également la fonction dans laquelle elle est inscrite.</p>
<p>“try” : essaye la fonction interne sans stopper la fonction englobante.
“catch” : capture le résultat du “try” quel qu’il soit.</p>
<ul>
<li><p><em>verbose</em> : par défaut = TRUE dans R donc si on veut tjrs tout afficher il ne sert à rien de le mentionner</p></li>
<li><p>Pour demander confirmation à l’utilisateur : <em>readline(“pay attention to me!(press enter to continue)”)</em></p></li>
</ul>
</div>
<div id="interaction-avec-lutilisateur" class="section level2">
<h2><span class="header-section-number">6.12</span> Interaction avec l’utilisateur</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="function-creation.html#cb23-1"></a>fun &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb23-2"><a href="function-creation.html#cb23-2"></a>  ANSWER &lt;-<span class="st"> </span><span class="kw">readline</span>(<span class="st">&quot;Are you a satisfied R user? &quot;</span>) <span class="co">## question</span></span>
<span id="cb23-3"><a href="function-creation.html#cb23-3"></a>  </span>
<span id="cb23-4"><a href="function-creation.html#cb23-4"></a>  <span class="cf">if</span> (<span class="kw">substr</span>(ANSWER, <span class="dv">1</span>, <span class="dv">1</span>) <span class="op">==</span><span class="st"> &quot;n&quot;</span>) <span class="co">## check the answer</span></span>
<span id="cb23-5"><a href="function-creation.html#cb23-5"></a>    <span class="kw">cat</span>(<span class="st">&quot;This is impossible.  YOU LIED!</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="co">## re-prompt</span></span>
<span id="cb23-6"><a href="function-creation.html#cb23-6"></a>  <span class="cf">else</span></span>
<span id="cb23-7"><a href="function-creation.html#cb23-7"></a>    <span class="kw">cat</span>(<span class="st">&quot;I knew it.</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb23-8"><a href="function-creation.html#cb23-8"></a>}</span>
<span id="cb23-9"><a href="function-creation.html#cb23-9"></a><span class="cf">if</span>(<span class="kw">interactive</span>()) <span class="kw">fun</span>()</span></code></pre></div>
</div>
<div id="iteration" class="section level2">
<h2><span class="header-section-number">6.13</span> Iteration</h2>
<p><a href="https://r4ds.had.co.nz/iteration.html" class="uri">https://r4ds.had.co.nz/iteration.html</a></p>
<ul>
<li>itérer n fois : <em>replicate(n, expr, simplify = F)</em> (renvoie une liste) ou <em>purrr::rerun(n, expr)</em> ou <em>purrr::map(1:n, ~ expr)</em> ou <em>lapply(seq_len(n), function(x) fun())</em></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="function-creation.html#cb24-1"></a><span class="co">## fun0 a function</span></span>
<span id="cb24-2"><a href="function-creation.html#cb24-2"></a><span class="co">## fun1 a a function to iterate fun0 with a n argument</span></span>
<span id="cb24-3"><a href="function-creation.html#cb24-3"></a>fun1 &lt;-<span class="st"> </span><span class="cf">function</span>(n, x) <span class="kw">replicate</span>(n, <span class="kw">fun0</span>(<span class="dt">x =</span> x))</span>
<span id="cb24-4"><a href="function-creation.html#cb24-4"></a><span class="kw">fun1</span>(n, x)</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="function-creation.html#cb25-1"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb25-2"><a href="function-creation.html#cb25-2"></a>fun0 &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">as.list</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, x <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>)), <span class="dt">nrow =</span> <span class="dv">2</span>))</span>
<span id="cb25-3"><a href="function-creation.html#cb25-3"></a>n &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb25-4"><a href="function-creation.html#cb25-4"></a><span class="kw">fun0</span>(<span class="dv">1</span>)</span>
<span id="cb25-5"><a href="function-creation.html#cb25-5"></a></span>
<span id="cb25-6"><a href="function-creation.html#cb25-6"></a><span class="kw">library</span>(microbenchmark)</span>
<span id="cb25-7"><a href="function-creation.html#cb25-7"></a></span>
<span id="cb25-8"><a href="function-creation.html#cb25-8"></a>mb &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(</span>
<span id="cb25-9"><a href="function-creation.html#cb25-9"></a>  <span class="dt">repl =</span> {<span class="kw">replicate</span>(n, <span class="kw">fun0</span>(<span class="dv">1</span>), <span class="dt">simplify =</span> <span class="ot">FALSE</span>)},</span>
<span id="cb25-10"><a href="function-creation.html#cb25-10"></a>  <span class="dt">reru =</span> {purrr<span class="op">::</span><span class="kw">rerun</span>(n, <span class="kw">fun0</span>(<span class="dv">1</span>))},</span>
<span id="cb25-11"><a href="function-creation.html#cb25-11"></a>  <span class="dt">map =</span> {purrr<span class="op">::</span><span class="kw">map</span>(<span class="dv">1</span><span class="op">:</span>n, <span class="op">~</span><span class="kw">fun0</span>(<span class="dv">1</span>))},</span>
<span id="cb25-12"><a href="function-creation.html#cb25-12"></a>  <span class="dt">lap =</span> {<span class="kw">lapply</span>(<span class="kw">seq_len</span>(n), <span class="cf">function</span>(x) <span class="kw">fun0</span>(<span class="dv">1</span>))},</span>
<span id="cb25-13"><a href="function-creation.html#cb25-13"></a>  <span class="dt">times =</span> 1000L</span>
<span id="cb25-14"><a href="function-creation.html#cb25-14"></a>)</span>
<span id="cb25-15"><a href="function-creation.html#cb25-15"></a></span>
<span id="cb25-16"><a href="function-creation.html#cb25-16"></a>mb</span>
<span id="cb25-17"><a href="function-creation.html#cb25-17"></a></span>
<span id="cb25-18"><a href="function-creation.html#cb25-18"></a>mb &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(</span>
<span id="cb25-19"><a href="function-creation.html#cb25-19"></a>  <span class="dt">suit =</span> {<span class="dv">1</span><span class="op">:</span>n},</span>
<span id="cb25-20"><a href="function-creation.html#cb25-20"></a>  <span class="dt">rep =</span> {<span class="kw">rep</span>(<span class="dv">1</span>, n)},</span>
<span id="cb25-21"><a href="function-creation.html#cb25-21"></a>  <span class="dt">seq_len =</span> {<span class="kw">seq_len</span>(n)},</span>
<span id="cb25-22"><a href="function-creation.html#cb25-22"></a>  <span class="dt">seq_along =</span> {<span class="kw">seq_along</span> (n)}, <span class="co">## le + rapide</span></span>
<span id="cb25-23"><a href="function-creation.html#cb25-23"></a>  <span class="dt">c =</span> {<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span>n)},</span>
<span id="cb25-24"><a href="function-creation.html#cb25-24"></a>  <span class="dt">times =</span> 1000L</span>
<span id="cb25-25"><a href="function-creation.html#cb25-25"></a>)</span>
<span id="cb25-26"><a href="function-creation.html#cb25-26"></a></span>
<span id="cb25-27"><a href="function-creation.html#cb25-27"></a>mb</span></code></pre></div>
<ul>
<li>repeat() : répète à l’infini si on ne met pas une condition et un break dedans.</li>
<li>Boucle for ou boucle while</li>
<li>Encapsuler une boucle dans une fonction</li>
<li><em>apply</em> family (base) : apply(), lapply(), tapply(), etc</li>
<li><em>map</em> family (purrr) (+ rapides car écrite en C): map() (makes a list), map_lgl() (logical vector), map_int() (integer vector), map_dbl() (double vector), map_chr() (character vector).
Les map ne produisent que des vecteurs, pas de matrice)
Peuvent apliquer des fonctions ou des formules (<a href="https://r4ds.had.co.nz/iteration.html" class="uri">https://r4ds.had.co.nz/iteration.html</a>).</li>
</ul>
<p>Les boucles for ne sont plus lentes depuis de nombreuses années. Le principal avantage de l’utilisation de fonctions comme map() n’est pas la vitesse, mais la clarté : elles rendent votre code plus facile à écrire et à lire.</p>
<ul>
<li>Modif de l’output : transposer une liste (inverser la tructure) : purrr::transpose()</li>
</ul>
</div>
<div id="parallelisation" class="section level2">
<h2><span class="header-section-number">6.14</span> Parallelisation</h2>
<p><a href="https://nceas.github.io/oss-lessons/parallel-computing-in-r/parallel-computing-in-r.html" class="uri">https://nceas.github.io/oss-lessons/parallel-computing-in-r/parallel-computing-in-r.html</a>
<a href="https://bookdown.org/rdpeng/rprogdatascience/parallel-computation.html" class="uri">https://bookdown.org/rdpeng/rprogdatascience/parallel-computation.html</a></p>
<p>Why : for time and memory</p>
<p>1 processor = multiple cores = multiple computations to be executed at the same time.
R is sequential and uses 1 processor</p>
<p>Plus simple de paralléliser des taches indépendantes, 1 par coeur.
1 tâche = 1 fct</p>
<ul>
<li>Packages : <em>parallel</em>, <em>future</em>, <em>foreach</em>, <em>doParallel</em></li>
<li>diffèrent selon les syst d’exploit on dirait</li>
</ul>
<p><em>Parallel</em> functions :
- detectCores() : détecte le nbr de coeur de la machine.
- mclapply() : utiliser plsrs coeurs sur un ordinateur local (= parallelized version of lapply) (pas sous windows)
- makeCluster() and clusterApply() : utiliser plusieurs processeurs sur des machines locales (et distantes)
- clusterExport() : à distance</p>
<p>Sous windows on ne peut pas paralléliser en local il faut donc un cluster :
- créer un cluster : <em>cl &lt;- makePSOCKcluster(nbr de copies de R à créer)</em> (à défaut d’avoir des coeurs il crée plsrs copies de R)
- créer l’envmt du cluster : <em>clusterExport(cl, varlist = c(“var1”, “var2”), envir = environment())</em>
- paralléliser : <em>parLapply(cl, seq_along(iter), myfun)</em>
- arrêter le cluster : <em>stopCluster(cl)</em></p>
<p><a href="https://stackoverflow.com/questions/17196261/understanding-the-differences-between-mclapply-and-parlapply-in-r" class="uri">https://stackoverflow.com/questions/17196261/understanding-the-differences-between-mclapply-and-parlapply-in-r</a></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="function-creation.html#cb26-1"></a><span class="kw">library</span>(parallel)</span>
<span id="cb26-2"><a href="function-creation.html#cb26-2"></a>cl &lt;-<span class="st"> </span><span class="kw">makePSOCKcluster</span>(<span class="dv">4</span>) <span class="co">## créer un cluster</span></span>
<span id="cb26-3"><a href="function-creation.html#cb26-3"></a>myfun &lt;-<span class="st"> </span><span class="cf">function</span>(i) { <span class="kw">Sys.sleep</span>(<span class="dv">1</span>); i } <span class="co">## the function</span></span>
<span id="cb26-4"><a href="function-creation.html#cb26-4"></a><span class="kw">parLapply</span>(cl, <span class="dv">1</span><span class="op">:</span><span class="dv">8</span>, myfun) <span class="co">## parallelization</span></span>
<span id="cb26-5"><a href="function-creation.html#cb26-5"></a><span class="kw">stopCluster</span>(cl) <span class="co">## stop the cluster</span></span></code></pre></div>
<p>Sur des boucles :
- foreach sequential operator : <em>%do%</em>
- doParallel parallelizable operator : <em>%dopar%</em></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="function-creation.html#cb27-1"></a><span class="co">## nonparallel for loop</span></span>
<span id="cb27-2"><a href="function-creation.html#cb27-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</span>
<span id="cb27-3"><a href="function-creation.html#cb27-3"></a>  <span class="kw">print</span>(<span class="kw">sqrt</span>(i))</span>
<span id="cb27-4"><a href="function-creation.html#cb27-4"></a>}</span>
<span id="cb27-5"><a href="function-creation.html#cb27-5"></a><span class="co">## nonparallel foreach loop</span></span>
<span id="cb27-6"><a href="function-creation.html#cb27-6"></a><span class="kw">library</span>(foreach)</span>
<span id="cb27-7"><a href="function-creation.html#cb27-7"></a><span class="kw">system.time</span>({</span>
<span id="cb27-8"><a href="function-creation.html#cb27-8"></a><span class="kw">foreach</span> (<span class="dt">i=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">.combine=</span>c) <span class="op">%do%</span><span class="st"> </span>{ <span class="co">## .combine=c si on veut unlist l&#39;output, .combine=rbind si on veut un df </span></span>
<span id="cb27-9"><a href="function-creation.html#cb27-9"></a>  <span class="kw">sqrt</span>(i)</span>
<span id="cb27-10"><a href="function-creation.html#cb27-10"></a>}</span>
<span id="cb27-11"><a href="function-creation.html#cb27-11"></a>})</span>
<span id="cb27-12"><a href="function-creation.html#cb27-12"></a><span class="co">## doParallel = foreach parallel adaptor for the &#39;parallel&#39; package</span></span>
<span id="cb27-13"><a href="function-creation.html#cb27-13"></a><span class="kw">library</span>(doParallel)</span>
<span id="cb27-14"><a href="function-creation.html#cb27-14"></a>numCores &lt;-<span class="st"> </span>parallel<span class="op">::</span><span class="kw">detectCores</span>(<span class="dt">logical =</span> <span class="ot">FALSE</span>) <span class="co">## FALSE to have the physical cores</span></span>
<span id="cb27-15"><a href="function-creation.html#cb27-15"></a></span>
<span id="cb27-16"><a href="function-creation.html#cb27-16"></a><span class="kw">system.time</span>({</span>
<span id="cb27-17"><a href="function-creation.html#cb27-17"></a><span class="kw">registerDoParallel</span>(numCores)</span>
<span id="cb27-18"><a href="function-creation.html#cb27-18"></a><span class="kw">foreach</span> (<span class="dt">i=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) <span class="op">%dopar%</span><span class="st"> </span>{</span>
<span id="cb27-19"><a href="function-creation.html#cb27-19"></a>  <span class="kw">sqrt</span>(i)</span>
<span id="cb27-20"><a href="function-creation.html#cb27-20"></a>}</span>
<span id="cb27-21"><a href="function-creation.html#cb27-21"></a>})</span></code></pre></div>
<p>When you’re done, clean up the cluster : <em>stopImplicitCluster()</em></p>
</div>
<div id="choses-à-savoir" class="section level2">
<h2><span class="header-section-number">6.15</span> Choses à savoir</h2>
<ul>
<li><p>Une fct a un environnement propre (ses var sont locales et ne vont pas dans l’envmt de travail): ainsi pas de conflit.
Eviter donc d’utiliser des objets provenant de l’envmt de travail.
Pour cela le mieux est de garder son environnement global tjrs vide (vider tt l’envrmt global : <em>rm(list = ls())</em>)</p></li>
<li><p>On peut définir une fonction à l’intérieur (= <em>fonction interne</em>) d’une autre fonction. Cette fonction sera locale à la fonction dans laquelle elle est définie.</p></li>
</ul>
</div>
<div id="débogage-tips" class="section level2">
<h2><span class="header-section-number">6.16</span> Débogage tips</h2>
<ul>
<li><p>Lorsque <em>Browse[1]&gt;</em> s’affiche dans la console, on peut écrire des commandes utilisant l’environnement de la fonction en bug, et donc la travailler.</p></li>
<li><p>Un booléen T/F ne marche pas si des NA existe</p></li>
<li><p>Lorsqu’une fct ne retourne pas le résultat attendu, placer des commandes <em>print</em> à l’intérieur de la fct, afin de suivre les valeurs prises par les différentes variables. On peut même écrire print(1) après la 1ère ligne, print(2) après la 2eme, ainsi de suite pour savoir à quelle ligne se trouve l’erreur.</p></li>
<li><p>Quand ce qui précède ne fonctionne pas, ne reste souvent plus qu’à exécuter manuellement la fonction :</p></li>
<li><p>définir dans l’espace de travail tous les arguments de la fonction,</p></li>
<li><p>puis exécuter le corps de la fonction ligne par ligne.
La vérification du résultat de chaque ligne permet généralement de retrouver la ou les expressions qui causent problème.</p></li>
</ul>
<p>ou</p>
<ul>
<li>masquez avec le « ## » toutes les commandes que vous venez d’éditer ou rajouter, sauf la 1ere, Sauvez, et testez le fichier afin de voir si cette ligne est correcte. Si « source » fonctionne, enlevez le prochain dièse. N’oubliez pas de sauver et de « sourcer » à chaque test.</li>
</ul>
</div>
<div id="où-écrire-ses-fcts" class="section level2">
<h2><span class="header-section-number">6.17</span> Où écrire ses fcts ?</h2>
<p>Dans un fichier .R indépendant
<em>nom de fichier = nom de la fonction</em></p>
</div>
<div id="comment-les-utiliser" class="section level2">
<h2><span class="header-section-number">6.18</span> Comment les utiliser ?</h2>
<p>Enregistrer le code de la fct dans l’envmt :
source(“nomfct/file.R”)</p>
</div>
<div id="plusieurs-fonctions-internes---passation-dinfos" class="section level2">
<h2><span class="header-section-number">6.19</span> Plusieurs fonctions internes - passation d’infos</h2>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="function-creation.html#cb28-1"></a><span class="co">## Main : fonction englobante</span></span>
<span id="cb28-2"><a href="function-creation.html#cb28-2"></a>main &lt;-<span class="st"> </span><span class="cf">function</span>(inventory){</span>
<span id="cb28-3"><a href="function-creation.html#cb28-3"></a>  inventory.volume &lt;-<span class="st"> </span><span class="kw">getvolume</span>(inventory)</span>
<span id="cb28-4"><a href="function-creation.html#cb28-4"></a>  <span class="kw">rm</span>(inventory)</span>
<span id="cb28-5"><a href="function-creation.html#cb28-5"></a>  inventory.final &lt;-<span class="st"> </span><span class="kw">filtervolume</span>(<span class="dt">patate =</span> inventory.volume)</span>
<span id="cb28-6"><a href="function-creation.html#cb28-6"></a>  <span class="kw">rm</span>(inventory.volume)</span>
<span id="cb28-7"><a href="function-creation.html#cb28-7"></a>  <span class="kw">return</span>(inventory.final)</span>
<span id="cb28-8"><a href="function-creation.html#cb28-8"></a>}</span>
<span id="cb28-9"><a href="function-creation.html#cb28-9"></a></span>
<span id="cb28-10"><a href="function-creation.html#cb28-10"></a><span class="co">## Fonctions internes</span></span>
<span id="cb28-11"><a href="function-creation.html#cb28-11"></a>getvolume &lt;-<span class="st"> </span><span class="cf">function</span>(inventory){</span>
<span id="cb28-12"><a href="function-creation.html#cb28-12"></a>  inventory &lt;-<span class="st"> </span>inventory <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb28-13"><a href="function-creation.html#cb28-13"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">v =</span> <span class="dv">2</span><span class="op">*</span>d)</span>
<span id="cb28-14"><a href="function-creation.html#cb28-14"></a>  <span class="kw">return</span>(inventory)</span>
<span id="cb28-15"><a href="function-creation.html#cb28-15"></a>}</span>
<span id="cb28-16"><a href="function-creation.html#cb28-16"></a></span>
<span id="cb28-17"><a href="function-creation.html#cb28-17"></a>filtervolume &lt;-<span class="st"> </span><span class="cf">function</span>(patate){</span>
<span id="cb28-18"><a href="function-creation.html#cb28-18"></a>  poireau &lt;-<span class="st"> </span>patate <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb28-19"><a href="function-creation.html#cb28-19"></a><span class="st">    </span><span class="kw">filter</span>(v <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb28-20"><a href="function-creation.html#cb28-20"></a>  <span class="kw">return</span>(poireau)</span>
<span id="cb28-21"><a href="function-creation.html#cb28-21"></a>}</span>
<span id="cb28-22"><a href="function-creation.html#cb28-22"></a></span>
<span id="cb28-23"><a href="function-creation.html#cb28-23"></a><span class="co">## test</span></span>
<span id="cb28-24"><a href="function-creation.html#cb28-24"></a>inventory &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>))</span>
<span id="cb28-25"><a href="function-creation.html#cb28-25"></a><span class="kw">main</span>(inventory)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fonctions-bien-sympatiques-trés-cher.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="i-am-a-modeler.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
